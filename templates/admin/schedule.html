{% extends "base.html" %}
{% block content %}
<div class="container mt-5 min-height">
    <h2>Расписание занятий</h2>

    <div class="table-responsive">
        <div class="mb-3">
            <button class="btn btn-primary" onclick="printDiv('printBlock')">Печать</button>
        </div>
        <div id="printBlock">
        <table class="table table-bordered table-striped align-middle text-center">
                            <thead class="table-dark">
                            <tr>
                                <th scope="col">Группа</th>
                                <th scope="col">ПН</th>
                                <th scope="col">ВТ</th>
                                <th scope="col">СР</th>
                                <th scope="col">ЧТ</th>
                                <th scope="col">ПТ</th>
                                <th scope="col">СБ</th>
                                <th scope="col">ВС</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for s in data["schedule"] %}
                            <tr>
                                <td>{{ s[7] }}</td>
                                <td>{{ s[0] }}</td>
                                <td>{{ s[1] }}</td>
                                <td>{{ s[2] }}</td>
                                <td>{{ s[3] }}</td>
                                <td>{{ s[4] }}</td>
                                <td>{{ s[5] }}</td>
                                <td>{{ s[6] }}</td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                        </div>
    </div>

</div>

<script>
function printDiv(divId) {
    const content = document.getElementById(divId).innerHTML;

    const printWindow = window.open('', '', 'width=900,height=700');

    printWindow.document.write(`
        <html>
        <head>
            <title>Печать</title>

            <!-- Bootstrap CSS -->
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

            <!-- Bootstrap Icons (если нужны) -->
            <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

            <style>
                body { padding: 20px; }
            </style>
        </head>
        <body>
            ${content}
        </body>
        </html>
    `);

    printWindow.document.close();
    printWindow.focus();
    
    setTimeout(() => {
        printWindow.print();
        printWindow.close();
    }, 300);
}
</script>
{% endblock %}